# =============================================================================
# NETWORK/INFRASTRUCTURE CONFIGURATION
# =============================================================================
# Reference IP addresses for your services (use 127.0.0.1 for local development)
# These variables are for reference only - update the actual service URLs below directly.
# Variable substitution is not supported when applications read .env files directly.

# AI/LLM services (Ollama) - Reference for OLLAMA_API_URL
AI_SERVICE_IP=127.0.0.1

# Database services (PostgreSQL, Qdrant) - Reference for DATABASE_URL, QDRANT_URL
DATABASE_IP=127.0.0.1

# Observability stack (Prometheus, Grafana, Loki) - Reference for observability URLs
OBSERVABILITY_IP=127.0.0.1

# =============================================================================
# DISCORD BOT TOKENS
# =============================================================================
# Get tokens from: https://discord.com/developers/applications

# Recommended: Single bot token for all containers
STARBUNK_TOKEN=your-discord-bot-token-here

# Advanced: Container-specific tokens (uncomment if using multiple bots)
# BUNKBOT_TOKEN=your-bunkbot-specific-token-here
# DJCOVA_TOKEN=your-djcova-specific-token-here
# STARBUNK_DND_TOKEN=your-dnd-specific-token-here
# COVABOT_TOKEN=your-covabot-specific-token-here

# Production only (never set in development)
# SNOWBUNK_TOKEN=your-production-snowbunk-token-here

# Legacy (not recommended)
# TOKEN=your-fallback-token-here

# =============================================================================
# DISCORD APPLICATION CONFIGURATION
# =============================================================================
# Discord server/guild ID
GUILD_ID=your-guild-id-here

# Discord application client ID (from Developer Portal > Application ID)
STARBUNK_CLIENT_ID=your-client-id-here

# Advanced: Container-specific client IDs (uncomment if needed)
# BUNKBOT_CLIENT_ID=your-bunkbot-client-id-here
# COVABOT_CLIENT_ID=your-covabot-client-id-here

# Legacy (not recommended)
# CLIENT_ID=your-client-id-here

# =============================================================================
# AI/LLM CONFIGURATION
# =============================================================================
# Ollama is the default provider (privacy, cost, control)
# OpenAI and Gemini are opt-in only (set API key to enable)

# Ollama (recommended)
OLLAMA_API_URL=http://127.0.0.1:11434
OLLAMA_DEFAULT_MODEL=qwen2.5:7b

# OpenAI (opt-in)
# OPENAI_API_KEY=your-openai-api-key-here
OPENAI_DEFAULT_MODEL=gpt-4o-mini

# Google Gemini (opt-in, free tier: 1500 requests/day)
# Get API key: https://aistudio.google.com/app/apikey
# GEMINI_API_KEY=your-gemini-api-key-here
GEMINI_DEFAULT_MODEL=gemini-2.0-flash-exp

# =============================================================================
# DATABASE CONFIGURATION
# =============================================================================
POSTGRES_DB=starbunk
POSTGRES_USER=starbunk
POSTGRES_PASSWORD=your-postgres-password
POSTGRES_PORT=5432

# Note: .env files are not interpolated by the application. Replace the
# placeholders below with your actual values; do not use ${VAR} syntax here.
DATABASE_URL="postgresql://starbunk:your-postgres-password@your-database-ip:5432/starbunk?schema=public"

# =============================================================================
# QDRANT VECTOR DATABASE CONFIGURATION
# =============================================================================
QDRANT_URL=http://127.0.0.1:6333
QDRANT_API_KEY=your-qdrant-api-key-here

# Embedding Configuration
EMBEDDING_MODEL=Xenova/all-MiniLM-L6-v2
EMBEDDING_DIMENSIONS=384
EMBEDDING_BATCH_SIZE=16
EMBEDDING_CACHE_SIZE=2000
EMBEDDING_TIMEOUT=60000

# Memory Collections
PERSONALITY_COLLECTION=covabot_personality
CONVERSATION_COLLECTION=covabot_conversations
MEMORY_COLLECTION=covabot_memory

# Performance Tuning
QDRANT_SEARCH_LIMIT=50
QDRANT_SIMILARITY_THRESHOLD=0.7
QDRANT_BATCH_SIZE=100

# =============================================================================
# OBSERVABILITY CONFIGURATION
# =============================================================================
PROMETHEUS_URL=http://127.0.0.1:9090
GRAFANA_URL=http://127.0.0.1:3000
LOKI_URL=http://127.0.0.1:3100
PROMETHEUS_PUSHGATEWAY_URL=http://127.0.0.1:9091

# Service ports for Prometheus scraping
BUNKBOT_METRICS_PORT=3002
BUNKBOT_HEALTH_PORT=3002
COVABOT_METRICS_PORT=3003
COVABOT_HEALTH_PORT=3003
DJCOVA_METRICS_PORT=3004
DJCOVA_HEALTH_PORT=3004
STARBUNK_DND_METRICS_PORT=3005
STARBUNK_DND_HEALTH_PORT=3005

# Configuration
ENABLE_METRICS=true
ENABLE_STRUCTURED_LOGGING=true
METRICS_PUSH_INTERVAL=30000
LOG_FORMAT=json

# Performance tuning
CIRCUIT_BREAKER_THRESHOLD=10
ENABLE_RUNTIME_METRICS=true
HTTP_TIMEOUT=10000
HTTP_MAX_REQUEST_SIZE=1048576

METRICS_AUTH_TOKEN=

# =============================================================================
# WEBHOOK CONFIGURATION
# =============================================================================
WEBHOOK_URL=https://discord.com/api/webhooks/your/webhook/url/here

# =============================================================================
# E2E LIVE TESTING
# =============================================================================
# Live E2E tests - only use with non-production test servers

E2E_TEST_WEBHOOK_URL=https://discord.com/api/webhooks/your/test/webhook/url
E2E_TEST_SERVER_ID=
E2E_TEST_CHANNEL_ID=
E2E_MONITOR_TOKEN=
E2E_ALLOW_WEBHOOK_TESTS=false
E2E_TIMEOUT_MS=20000
E2E_DELAY_MS=2000

# Chance-based bot testing (optional)
E2E_INCLUDE_CHANCE_BOTS=false
E2E_CHANCE_ATTEMPTS=5
E2E_FAILURE_THRESHOLD=1


# =============================================================================
# DEBUG AND TESTING CONFIGURATION
# =============================================================================
# When DEBUG_MODE=true, CovaBot only responds to COVA_USER_ID
DEBUG_MODE=false

# Discord user ID for debug mode filtering
COVA_USER_ID=your-cova-user-id-here

# Restrict bot to specific servers (comma-separated IDs, empty = all servers)
# Example: TESTING_SERVER_IDS=123456789012345678,987654321098765432
# TESTING_SERVER_IDS=

# Restrict bot to specific channels (comma-separated IDs, empty = all channels)
# Example: TESTING_CHANNEL_IDS=123456789012345678,987654321098765432
# TESTING_CHANNEL_IDS=

# E2E test identity verification (only needed for E2E tests)
# E2E_TEST_MEMBER_ID=your-test-member-discord-id
# E2E_ID_VENN=your-venn-test-id
# E2E_ID_GUY=your-guy-test-id
# E2E_ID_SIGGREAT=your-sig-test-id

LOG_LEVEL=info
NODE_ENV=development

# =============================================================================
# CENTRALIZED MESSAGE FILTERING CONFIGURATION
# =============================================================================
# Bot IDs that can bypass default bot filtering
BOT_WHITELIST_IDS="your-bot-whitelist-ids-here"

# Bots with inverse behavior (only respond to bots)
INVERSE_BEHAVIOR_BOTS="BotBot"

# =============================================================================
# ADDITIONAL GUILD CONFIGURATION
# =============================================================================
# STARBUNK_STAGING_GUILD_ID=856617421427441674
# SNOWFALL_GUILD_ID=696689954759245915
# COVADAX_GUILD_ID=798613445301633134

# =============================================================================
# SECURITY CONFIGURATION
# =============================================================================
# JWT_SECRET=your-jwt-secret-here
# API_KEY=your-api-key-here

# =============================================================================
# SETUP INSTRUCTIONS
# =============================================================================
# 1. Copy this file: cp .env.example .env
# 2. Update IP variables at top (AI_SERVICE_IP, DATABASE_IP, OBSERVABILITY_IP)
#    - Use 127.0.0.1 for local development
#    - Use actual server IPs for production (e.g., 192.168.1.100)
# 3. Replace all "your-*-here" with actual tokens/keys/passwords
# 4. Set Discord IDs: GUILD_ID, STARBUNK_CLIENT_ID, COVA_USER_ID (if needed)
# 5. Configure BOT_WHITELIST_IDS if needed
# 6. Never commit your .env file to version control
#
# For details, see Discord section comments above and OBSERVABILITY.md
